// mapSVG v5.4.4 - February 23 2013
// http://codecanyon.net/user/Yatek/portfolio?ref=Yatek
(function(e){var t={};var n=navigator.userAgent.toLowerCase();var r=document.getElementsByTagName("script");var i=r[r.length-1].src.split("/");i.pop();var s=i.join("/")+"/";i.pop();var o=i.join("/")+"/";var u=n.indexOf("ipad")>-1||n.indexOf("iphone")>-1||n.indexOf("ipod")>-1||n.indexOf("android")>-1;var a={};a.ie=n.indexOf("msie")>-1?{}:false;if(a.ie)a.ie.old=navigator.userAgent.match(/MSIE [6-8]/)!==null;a.firefox=n.indexOf("firefox")>-1;if(u){var f=function(e){return e.touches[0]?{x:e.touches[0].pageX,y:e.touches[0].pageY}:{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY}}}else{var f=function(t){return t.pageX?{x:t.pageX,y:t.pageY}:{x:t.clientX+e("html").scrollLeft(),y:t.clientY+e("html").scrollTop()}}}var l=[128,256,512,1024,2048,4096,8192,16384,32768,65536,131072,262144,524288,1048576,2097152,4194304,8388608,16777216,33554432,67108864,134217728,268435456,536870912,1073741824,2147483648,4294967296,8589934592,17179869184,34359738368,68719476736,137438953472];var c=[.7111111111111111,1.4222222222222223,2.8444444444444446,5.688888888888889,11.377777777777778,22.755555555555556,45.51111111111111,91.02222222222223,182.04444444444445,364.0888888888889,728.1777777777778,1456.3555555555556,2912.711111111111,5825.422222222222,11650.844444444445,23301.68888888889,46603.37777777778,93206.75555555556,186413.51111111112,372827.02222222224,745654.0444444445,1491308.088888889,2982616.177777778,5965232.355555556,11930464.711111112,23860929.422222223,47721858.844444446,95443717.68888889,190887435.37777779,381774870.75555557,763549741.5111111];var h=[40.74366543152521,81.48733086305042,162.97466172610083,325.94932345220167,651.8986469044033,1303.7972938088067,2607.5945876176133,5215.189175235227,10430.378350470453,20860.756700940907,41721.51340188181,83443.02680376363,166886.05360752725,333772.1072150545,667544.214430109,1335088.428860218,2670176.857720436,5340353.715440872,10680707.430881744,21361414.86176349,42722829.72352698,85445659.44705395,170891318.8941079,341782637.7882158,683565275.5764316,1367130551.1528633,2734261102.3057265,5468522204.611453,10937044409.222906,21874088818.445812,43748177636.891624];var p={keepSourceStyles:false,loadingText:"Loading map...",colors:{background:"#eeeeee",selected:5,hover:2},regions:{},viewBox:[],cursor:"default",scale:1,tooltipsMode:"hover",tooltips:{show:"hover",mode:"names"},onClick:null,mouseOver:null,mouseOut:null,disableAll:false,hideAll:false,marks:null,hover_mode:"brightness",selected_mode:"brightness",hover_brightness:1,selected_brightness:5,pan:false,panLimit:false,panBackground:false,zoom:false,popover:{width:"auto",height:"auto"},buttons:true,zoomLimit:[0,5],zoomDelta:1.2,zoomButtons:{show:true,location:"right"},multiSelect:false};var d={attrs:{cursor:"pointer",src:o+"markers/_pin_default.png"}};var v=function(n,r){var i;this.methods={destroy:function(){delete t[i.$map.attr("id")];i.$map.empty();return s},getData:function(){return i},getScale:function(){var e=i.svgDefault.width/i.svgDefault.height;var t=i.options.width/i.options.height;var n,r;var s=i.options.responsive?[i.$map.width(),i.$map.height()]:[i.options.width,i.options.height];if(t<e){n=i.svgDefault.width/i.svgDefault.viewBox[2];r=s[0]/i.viewBox[2]}else{n=i.svgDefault.height/i.svgDefault.viewBox[3];r=s[1]/i.viewBox[3]}return 1-(n-r)},fluidResize:function(e,t){if(!e||!t){e=i.$map.width();t=i.$map.height()}i.R.setSize(e,t);i.scale=s.getScale();s.marksAdjustPosition()},getViewBox:function(){return i.viewBox},setViewBox:function(e){if(typeof e=="string"){var t=i.ref[e].getBBox();i.viewBox=[t.x-5,t.y-5,t.width+10,t.height+10];var n=true}else{var r=e&&e.length==4?e:i.svgDefault.viewBox;var n=parseInt(r[2])!=i.viewBox[2]||parseInt(r[3])!=i.viewBox[3];i.viewBox=[parseFloat(r[0]),parseFloat(r[1]),parseFloat(r[2]),parseFloat(r[3])]}i.R.setViewBox(i.viewBox[0],i.viewBox[1],i.viewBox[2],i.viewBox[3],true);if(n){i.scale=s.getScale();s.marksAdjustPosition();if(a.ie&&!a.ie.old||a.firefox){s.mapAdjustStrokes()}}return true},viewBoxSetBySize:function(t,n){i._viewBox=s.viewBoxGetBySize(t,n);i.viewBox=e.extend([],i._viewBox);i.scale=s.getScale();i.R.setViewBox(i.viewBox[0],i.viewBox[1],i.viewBox[2],i.viewBox[3],true);s.marksAdjustPosition();return i.viewBox},viewBoxGetBySize:function(t,n){var r=t/n;var s=i.svgDefault.viewBox[2]/i.svgDefault.viewBox[3];var o=e.extend([],i.svgDefault.viewBox);if(r!=s){o[2]=t*i.svgDefault.viewBox[2]/i.svgDefault.width;o[3]=n*i.svgDefault.viewBox[3]/i.svgDefault.height}return o},viewBoxReset:function(){s.setViewBox()},mapAdjustStrokes:function(){e.each(i.ref,function(e,t){if(t.default_attr["stroke-width"])t.attr({"stroke-width":t.default_attr["stroke-width"]/i.scale})})},zoomIn:function(){s.zoom(1)},zoomOut:function(){s.zoom(-1)},touchZoomStart:function(e){touchZoomStart=i._scale;i.scale=i.scale*zoom_k;zoom=i._scale;i._scale=i._scale*zoom_k;var t=i.viewBox[2];var n=i.viewBox[3];var r=[];r[2]=i._viewBox[2]/i._scale;r[3]=i._viewBox[3]/i._scale;r[0]=i.viewBox[0]+(t-r[2])/2;r[1]=viewBox[1]+(n-r[3])/2;s.setViewBox(r,true)},touchZoomMove:function(){},touchZoomEnd:function(){},zoom:function(e,t){var n=i.viewBox[2];var r=i.viewBox[3];var o=[];if(!t){var u=e>0?1:-1;i._zoomLevel=i.zoomLevel;i._zoomLevel+=u;if(i._zoomLevel>i.options.zoomLimit[1]||i._zoomLevel<i.options.zoomLimit[0])return false;i.zoomLevel=i._zoomLevel;var a=u*i.options.zoomDelta;if(a<1)a=-1/a;i._scale=i._scale*a;o[2]=i._viewBox[2]/i._scale;o[3]=i._viewBox[3]/i._scale}else{i._scale=t;o[2]=i.touchZoomStartViewBox[2]/i._scale;o[3]=i.touchZoomStartViewBox[3]/i._scale}o[0]=i.viewBox[0]+(n-o[2])/2;o[1]=i.viewBox[1]+(r-o[3])/2;s.setViewBox(o,true)},markUpdate:function(e,t){if(t.attrs["src"]=="")delete t.attrs["src"];if(t.attrs["href"]=="")delete t.attrs["href"];var n=new Image;n.onload=function(){t.data.width=this.width;t.data.height=this.height;t.attrs.width=parseFloat(t.data.width/i.scale).toFixed(2);t.attrs.height=parseFloat(t.data.height/i.scale).toFixed(2);if(r.editMode&&t.attrs.href){e.data("href",t.attrs.href);delete t.attrs.href}else if(r.editMode&&!t.attrs.href){e.removeData("href")}e.data(t.data);e.attr(t.attrs)};n.src=t.attrs.src},markDelete:function(e){e.remove()},markAdd:function(t,n){var r=e.extend(true,{},d,t);if(r.width&&r.height){return s.markAddFinalStep(r,n)}else{var i=new Image;i.onload=function(){r.width=this.width;r.height=this.height;return s.markAddFinalStep(r,n)};i.src=r.attrs.src}},markAddFinalStep:function(t,n){var r=e.extend(true,{},t.attrs);var o=parseFloat(t.width/i.scale).toFixed(2);var a=parseFloat(t.height/i.scale).toFixed(2);var f=t.xy?t.xy:t.attrs.x?[t.attrs.x,t.attrs.y]:t.c?s.ll2px(t):false;if(!f)return false;if(n){f[0]=f[0]/i.scale-t.width/(2*i.scale);f[1]=(f[1]-t.height)/i.scale}f[0]=parseFloat(f[0]).toFixed(4);f[1]=parseFloat(f[1]).toFixed(4);if(i.options.editMode)delete r.href;delete r.width;delete r.height;var l=i.R.image(t.attrs.src,f[0],f[1],o,a).attr(r).data(t);l.mapsvg_type="mark";if(t.id)l.node.id=t.id;if(!i.options.editMode){if(!u){l.mousedown(function(e){if(this.data("popover")){s.showPopover(e,this.data("popover"))}if(i.options.onClick)return i.options.onClick.call(this,e,s)});if(i.options.mouseOver){l.mouseover(function(e){return i.options.mouseOver.call(this,e,s)})}if(i.options.mouseOut){l.mouseout(function(e){return i.options.mouseOver.call(this,e,s)})}}else{l.touchstart(function(e){if(this.attrs.href){window.location.href=this.attrs.href}else if(this.data("popover")){s.showPopover(e,this.data("popover"))}if(i.options.onClick)return i.options.onClick.call(this,e,s)})}}s.markEventHandlersSet(i.options.editMode,l);i.RMarks.push(l);if(n)i.options.marksEditHandler.call(l);else s.markAdjustPosition(l);return l},marksAdjustPosition:function(e){if(!e&&(!i.RMarks||i.RMarks.length<1))return false;var t,n;for(var r in i.RMarks.items){var s=i.RMarks.items[r].data("width");var o=i.RMarks.items[r].data("height");t=s/2-s/(2*i.scale);n=o-o/i.scale;if(a.ie){s=parseInt(s);o=parseInt(o)}i.RMarks.items[r].attr({width:s/i.scale,height:o/i.scale}).transform("t"+t+","+n)}},markAdjustPosition:function(e){var t=e.data("width");var n=e.data("height");var r=t/2-t/(2*i.scale);var s=n-n/i.scale;e.attr({width:t/i.scale,height:n/i.scale}).transform("t"+r+","+s)},markGetDefaultCoords:function(e,t,n,r,i){e=parseFloat(e);t=parseFloat(t);n=parseFloat(n);r=parseFloat(r);e=parseFloat(e+n/(2*i)-n/2).toFixed(2);t=parseFloat(t+r/i-r).toFixed(2);return[e,t]},markMoveStart:function(){this.data("ox",parseFloat(this.attr("x")));this.data("oy",parseFloat(this.attr("y")))},markMove:function(e,t){e=e/i.scale;t=t/i.scale;this.attr({x:this.data("ox")+e,y:this.data("oy")+t})},markMoveEnd:function(){if(this.data("ox")==this.attr("x")&&this.data("oy")==this.attr("y")){r.marksEditHandler.call(this)}},panStart:function(t){if(t.target.id=="btnZoomIn"||t.target.id=="btnZoomOut")return false;t.preventDefault();var n=t.touches&&t.touches[0]?t.touches[0]:t;i.pan={};i.pan.vxi=i.viewBox[0];i.pan.vyi=i.viewBox[1];i.pan.x=n.clientX;i.pan.y=n.clientY;i.pan.dx=0;i.pan.dy=0;i.pan.vx=0;i.pan.vy=0;if(!u)e("body").on("mousemove",s.panMove).on("mouseup",s.panEnd)},panMove:function(t){t.preventDefault();i.isPanning=true;i.RMap.attr({cursor:"move"});e("body").css({cursor:"move"});var n=t.touches&&t.touches[0]?t.touches[0]:t;i.pan.dx=i.pan.x-n.clientX;i.pan.dy=i.pan.y-n.clientY;var r=parseInt(i.pan.vxi+i.pan.dx/i.scale);var o=parseInt(i.pan.vyi+i.pan.dy/i.scale);if(i.options.panLimit){if(r<i.svgDefault.viewBox[0])r=i.svgDefault.viewBox[0];else if(i.viewBox[2]+r>i.svgDefault.viewBox[2])r=i.svgDefault.viewBox[2]-i.viewBox[2];if(o<i.svgDefault.viewBox[1])o=i.svgDefault.viewBox[1];else if(i.viewBox[3]+o>i.svgDefault.viewBox[3])o=i.svgDefault.viewBox[3]-i.viewBox[3]}i.pan.vx=r;i.pan.vy=o;s.setViewBox([i.pan.vx,i.pan.vy,i.viewBox[2],i.viewBox[3]])},panEnd:function(t){i.isPanning=false;if(i.region_clicked&&Math.abs(i.pan.dx)<5&&Math.abs(i.pan.dy)<5)s.regionClickHandler(t,i.region_clicked);e("body").css({cursor:"default"});i.RMap.attr({cursor:i.options.cursor});i.viewBox[0]=i.pan.vx||i.viewBox[0];i.viewBox[1]=i.pan.vy||i.viewBox[1];if(!u)e("body").off("mousemove",s.panMove).off("mouseup",s.panEnd)},panRegionClickHandler:function(e,t){i.region_clicked=t},touchStart:function(e){e.preventDefault();if(i.options.zoom&&e.touches&&e.touches.length==2){i.touchZoomStartViewBox=i.viewBox;i.touchZoomStart=i.scale;i.touchZoomEnd=1}else{s.panStart(e);i.isPanning=true}},touchMove:function(e){e.preventDefault();if(i.options.zoom&&e.touches&&e.touches.length>=2){s.zoom(null,e.scale);i.isPanning=false}else if(i.isPanning){s.panMove(e)}},touchEnd:function(e){e.preventDefault();if(i.touchZoomStart){i.touchZoomStart=false;i.touchZoomEnd=false}else if(i.isPanning){s.panEnd(e)}},marksHide:function(){i.RMarks.hide()},marksShow:function(){i.RMarks.show()},marksGet:function(){var t=[];e.each(i.RMarks,function(n,r){if(r.attrs){var o=e.extend({},r.attrs);if(!r.data("placed")){var u=s.markGetDefaultCoords(r.attrs.x,r.attrs.y,r.data("width"),r.data("height"),i.scale);o.x=u[0];o.y=u[1]}if(r.data("href"))o.href=r.data("href");t.push({attrs:o,tooltip:r.data("tooltip"),popover:r.data("popover"),width:r.data("width"),height:r.data("height"),href:r.data("href"),placed:true})}});return t},getSelected:function(){return i.selected_id},selectRegion:function(t){if(!i.ref[t]||i.ref[t].disabled)return false;if(i.options.multiSelect){var n=e.inArray(t,i.selected_id);if(n>=0){i.ref[t].attr({fill:i.ref[t].default_attr.fill});i.selected_id.splice(n,1);return}else{i.selected_id.push(t)}}else{if(i.selected_id)i.ref[i.selected_id].attr(i.ref[i.selected_id].default_attr);i.selected_id=t}i.ref[t].attr(i.ref[t].selected_attr)},unhighlightRegion:function(t){if(i.ref[t].disabled||i.options.multiSelect&&e.inArray(t,i.selected_id)>=0||i.selected_id==t)return false;i.ref[t].attr({fill:i.ref[t].default_attr.fill})},highlightRegion:function(t){if(i.isPanning||i.ref[t].disabled||i.options.multiSelect&&e.inArray(t,i.selected_id)>=0||i.selected_id==t)return false;i.ref[t].attr(i.ref[t].hover_attr)},ll2px:function(e){var t=e.c;var n=parseFloat(t[0]);var r=parseFloat(t[1]);var i=2;var s=l[i];var o=1;var u=Math.round(s+r*c[i]);var a=Math.sin(n*3.14159/180);if(a<-.9999)a=-.9999;else if(a>.9999)a=.9999;var f=Math.round(s+.5*Math.log((1+a)/(1-a))*-h[i]);var p=[u-(33.8+e.width/2),f-(141.7+e.height)];return p},isRegionDisabled:function(e,t){if(i.options.regions[e]&&(i.options.regions[e].disabled||t=="none")){return true}else if(i.options.disableAll||t=="none"||e=="labels"||e=="Labels"){return true}else{return false}},regionClickHandler:function(e,t){if(!t)return false;i.region_clicked=null;s.selectRegion(t.name);s.hidePopover();if(t.popover)s.showPopover(e,t.popover);if(i.options.onClick)return i.options.onClick.call(t,e,s);if(u&&t.attrs.href)window.location.href=t.attrs.href},addText:function(t){var n=s.getElementStyles(t);var r=e.map(e(t).find("tspan"),function(t,n){return e(t).text()});if(!r.length)r=[e(t).text()];var o=parseInt(n.getPropertyValue("font-size"));var u=r.length>1?-o*r.length/(2*1.5):o/2;r=r.join("\n");var a=e(t).attr("x");var f=e(t).attr("y")-u;var l=i.R.text(a,f,r).attr({"font-size":o,"font-family":n.getPropertyValue("font-family")+", sans-serif, verdana","font-weight":n.getPropertyValue("font-weight")||"normal",fill:i.options.colors.font||n.getPropertyValue("fill")||"#000","text-anchor":"start"});l.mapsvg_type="text";e(l.node).css({"-webkit-touch-callout":"none","-webkit-user-select":"none",cursor:"default","pointer-events":"none"})},getElementStyles:function(t){if(!a.ie){return t.style}else{var n={};n.getPropertyValue=function(e){return n[e]||undefined};if(e(t).attr("style")){var r=e(t).attr("style").split(";");e.each(r,function(e,t){var r=t.split(":");n[r[0]]=r[1]})}return n}},regionAdd:function(t){var n=s.getElementStyles(t);var o=n.getPropertyValue("fill")||e(t).attr("fill");var u=e(t).attr("id");i.ref[u]=i.R.path(e(t).attr("d"));i.ref[u].mapsvg_type="region";i.ref[u].id=u;i.ref[u].node.id=u;i.ref[u].name=u;i.ref[u].disabled=s.isRegionDisabled(u,o);i.ref[u].default_attr={};i.ref[u].default_attr["fill"]=o;if(i.ref[u].default_attr["fill"]&&i.ref[u].default_attr["fill"]!="none"&&i.options.colors.base)i.ref[u].default_attr["fill"]=i.options.colors.base;var f=i.options.colors["fill-opacity"]||n.getPropertyValue("fill-opacity")||e(t).attr("fill-opacity");if(f)i.ref[u].default_attr["fill-opacity"]=f;i.ref[u].default_attr["stroke"]=n.getPropertyValue("stroke")||e(t).attr("stroke")||"none";if(i.ref[u].default_attr["stroke"])i.ref[u].default_attr["stroke-width"]=n.getPropertyValue("stroke-width")||e(t).attr("stroke-width");if(i.ref[u].default_attr["stroke"]&&i.ref[u].default_attr["stroke"]!="none"&&i.options.colors.stroke)i.ref[u].default_attr["stroke"]=i.options.colors.stroke;if(i.ref[u].default_attr["stroke-width"]&&i.options.strokeWidth)i.ref[u].default_attr["stroke-width"]=i.options.strokeWidth;i.ref[u].selected_attr={};i.ref[u].hover_attr={};if(i.ref[u].disabled){i.ref[u].default_attr.cursor="defalut";e(i.ref[u].node).css({"pointer-events":"none"})}else{i.ref[u].default_attr.cursor=i.options.cursor}if(i.options.regions[u]){if(i.options.regions[u].attr)i.ref[u].default_attr=e.extend(true,{},i.ref[u].default_attr,i.options.regions[u].attr);if(i.options.regions[u].tooltip)i.ref[u].tooltip=i.options.regions[u].tooltip;if(i.options.regions[u].popover)i.ref[u].popover=i.options.regions[u].popover;if(i.options.regions[u].data)i.ref[u].data(r.regions[u].data)}if(typeof i.options.colors.selected=="string")i.ref[u].selected_attr["fill"]=i.options.colors.selected;else i.ref[u].selected_attr["fill"]=s.lighten(i.ref[u].default_attr.fill,i.options.colors.selected);if(typeof i.options.colors.hover=="string")i.ref[u].hover_attr["fill"]=i.options.colors.hover;else i.ref[u].hover_attr["fill"]=s.lighten(i.ref[u].default_attr.fill,i.options.colors.hover);var l=n.getPropertyValue("stroke-dasharray")||e(t).attr("stroke-dasharray");if(l&&l!="none")i.ref[u].default_attr["stroke-dasharray"]="--";i.ref[u].attr(i.ref[u].default_attr);if(!a.ie&&!a.firefox)e(i.ref[u].node).css({"vector-effect":"non-scaling-stroke"});i.RMap.push(i.ref[u]);if(i.options.regions[u]&&i.options.regions[u].selected)s.selectRegion(u)},lighten2:function(e,t){var n=e.charAt(0)=="#"?e.substring(1,7):e;var r=Raphael.rgb2hsb(parseInt(n.substring(0,2),16),parseInt(n.substring(2,4),16),parseInt(n.substring(4,6),16));r.b+=.1;return Raphael.hsb(r)},lighten:function(e,t){if(!e)return false;t=parseInt(t)*.008;var n=Raphael.getRGB(e);var r=Raphael.rgb2hsb(n.r,n.g,n.b);var i=r.b+t;if(i>=1){i=1;r.s=r.s-t*1.5}else if(i<=0){i=0}var s=Raphael.hsb2rgb(r.h,r.s,i);return s.hex},setPan:function(e){if(e){i.options.pan=true;i.$map.on("mousedown",s.panStart)}else{if(i.options.pan)i.$map.off("mousedown",s.panStart);i.options.pan=false}},markAddClickHandler:function(t){if(e(t.target).is("image"))return false;var n=t.offsetX==undefined?t.layerX:t.offsetX;var r=t.offsetY==undefined?t.layerY:t.offsetY;s.markAdd({xy:[n,r]},true)},markEventHandlersSet:function(e,t){e=s.parseBoolean(e);if(e){if(i.options.editMode===false)t.unhover();t.drag(s.markMove,s.markMoveStart,s.markMoveEnd)}else{if(i.options.editMode)t.undrag();t.hover(function(){if(this.data("tooltip")){i.mapTip.html(this.data("tooltip"));i.mapTip.show()}},function(){if(this.data("tooltip"))i.mapTip.hide()})}},setMarksEditMode:function(e,t){e=s.parseBoolean(e);if(e){i.$map.on("click",s.markAddClickHandler)}else{i.$map.off("click",s.markAddClickHandler)}i.options.editMode=e},setZoom:function(t){if(t){i.options.zoom=true;i.$map.bind("mousewheel.mapsvg",function(e,t,n,r){var i=t>0?1:-1;s.zoom(i);return false});if(i.options.zoomButtons.show){var n=e("<div></div>");var r={"border-radius":"3px",display:"block","margin-bottom":"7px"};var o=e('<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABhElEQVR4nJWTT4rqQBDGf92pSEJWmYfgQpABb+EB1NU8DyBe5M1q5iKStTCDd/AWggElC3EQJAQxbb/NJDH+mccraEh31fdVfR8pBRBF0Uuapn+AX8CZn0MDuyAI3sfj8aeaTqcvWZZ9XFdZazmdTgC4rotS6oYpCILfkmXZ6yNwt9tFKcVyucRxnBuSNE1fNfB0TWCModlsMhwOGQwGdDod8jy/J+dJP9JsjKl9W2vvlZ3lcuyiS57ntY7FvZDgum6Zk0vN7XYbay3GGMIwLItarRbGGEQErTVxHON5XkVQAEaj0b0x6fV6tXsURRwOBxzHQd9F/CPO58o2ARARdrsds9ms9CIMQ/r9PgCLxYL1eo3rulhr2e/3dQkAnueRJElp2vF4LLskScJmsynNK8A1AqjcVUohUqVEBBGpuV+E/j63CV093/sLizIBvoDny1fHcdhut8znc5RSrFar2kQX8aV933+7ZldK0Wg0iOO4BD9YpjcF8L2R/7XOvu+/TyaTz79+UqnWsVHWHAAAAABJRU5ErkJggg==" id="btnZoomIn"/>').on("click",function(e){e.stopPropagation();s.zoomIn()}).css(r);var u=e('<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA6klEQVR4nKWTPW6DQBBG3w4RaLXSFs4puAe9fQHEReLKPgYN4gLxQei5RNytFraANNEKKwk29uum+N78SKMA2rbdO+c+gHdgYh0Bvowx57IsL6ppmr33/vNO6E+MMQfx3h+fCQM4544C7J4VADvh/s5rTG/LKoTANK37RIQ0TWMdBSEE8jwnyzLmef437L2n7/soiQLnHEVRPDR313VRIA8lVogTWGup6/pmhSRJAFBKxcAwDFhrfwuSJCGEwDiOqx2VUlF8I1h23ILw2h1EgOsLgqtorU/LI23BGHNSAD8fuemdtdbnqqou39SbTK6RdYDsAAAAAElFTkSuQmCC" id="btnZoomOut"/>').on("click",function(e){e.stopPropagation();s.zoomOut()}).css(r);n.append(u).append(o).css({position:"absolute",top:"15px",width:"16px",cursor:"pointer"});if(i.options.zoomButtons.location=="right")n.css({right:"15px"});else if(i.options.zoomButtons.location=="left")n.css({left:"15px"});i.zoomButtons=n;i.$map.append(i.zoomButtons)}}else{if(i.options.zoom)i.$map.unbind("mousewheel.mapsvg");if(i.zoomButtons)i.zoomButtons.hide();i.options.zoom=false}},setSize:function(t,n,r){i.options.width=parseInt(t);i.options.height=parseInt(n);i.options.responsive=s.parseBoolean(r);if(!i.options.width&&!i.options.height){i.options.width=i.svgDefault.width;i.options.height=i.svgDefault.height}else if(!i.options.width&&i.options.height){i.options.width=parseInt(i.options.height*i.svgDefault.width/i.svgDefault.height)}else if(i.options.width&&!i.options.height){i.options.height=parseInt(i.options.width*i.svgDefault.height/i.svgDefault.width)}if(i.options.responsive){var o=i.options.width;var u=i.options.height;i.options.width=i.svgDefault.width;i.options.height=i.svgDefault.height}i.whRatio=i.options.width/i.options.height;i.scale=s.getScale();if(i.options.responsive){i.$map.css({"max-width":o+"px","max-height":u+"px",width:"auto",height:"auto",position:"relative"}).height(i.$map.width()/i.whRatio);e(window).bind("resize.mapsvg",function(){i.$map.height(i.$map.width()/i.whRatio)})}else{i.$map.css({width:i.options.width+"px",height:i.options.height+"px","max-width":"none","max-height":"none",position:"relative"});e(window).unbind("resize.mapsvg")}if(!i.options.responsive&&i.R)i.R.setSize(i.options.width,i.options.height);return[i.options.width,i.options.height]},setMarks:function(t){if(t){e.each(t,function(e,t){s.markAdd(t)})}},showTip:function(){},showPopover:function(){},hideTip:function(){i.mapTip.hide();i.mapTip.html("")},setTooltip:function(t){i.mapTip=e('<div id="map_tooltip"></div>');e("body").append(i.mapTip);i.mapTip.css({"font-weight":"normal","font-size":"12px",color:"#000000",position:"absolute","border-radius":"4px","-moz-border-radius":"4px","-webkit-border-radius":"4px",top:"0",left:"0","z-index":"1000",display:"none","background-color":"white",border:"1px solid #eee",padding:"4px 7px","max-width":"600px"});if(i.options.tooltips.show=="hover"){i.$map.mousemove(function(e){i.mapTip.css("left",e.pageX).css("top",e.pageY+30)})}s.showTip=i.options.tooltipsMode=="custom"?function(e){if(i.ref[e].tooltip){i.mapTip.html(i.ref[e].tooltip);i.mapTip.show()}}:i.options.tooltipsMode=="names"?function(e){if(i.ref[e].disabled)return false;i.mapTip.html(e.replace(/_/g," "));i.mapTip.show()}:i.options.tooltipsMode=="combined"?function(e){if(i.ref[e].tooltip){i.mapTip.html(i.ref[e].tooltip);i.mapTip.show()}else{if(i.ref[e].disabled)return false;i.mapTip.html(e.replace(/_/g," "));i.mapTip.show()}}:function(e){null}},setPopover:function(t){if(!t)return false;e("body").prepend('<div class="map_popover"><div class="map_popover_content"></div><div class="map_popover_close">x</div></div>');i.mapPopover=e(".map_popover");var n=i.mapPopover.find(".map_popover_close");i.mapPopover.css({"font-weight":"normal","font-size":"12px",color:"#000000",position:"absolute","border-radius":"4px","-moz-border-radius":"4px","-webkit-border-radius":"4px",top:"0",left:"0","z-index":"1000",width:i.options.popover.width+(i.options.popover.width=="auto"?"":"px"),height:i.options.popover.height+(i.options.popover.height=="auto"?"":"px"),display:"none","background-color":"white",border:"1px solid #ccc",padding:"12px","-webkit-box-shadow":"5px 5px 5px 0px rgba(0, 0, 0, 0.2)","box-shadow":"5px 5px 5px 0px rgba(0, 0, 0, 0.2)"});n.css({position:"absolute",top:"0",right:"5px",cursor:"pointer",color:"#aaa","z-index":"1200"});s.showPopover=function(t,n,r){if(!r||r.length!=2){var s=f(t);var r=[s.x,s.y]}if(n){i.mapPopover.find(".map_popover_content").html(n);var o=r[0]-i.mapPopover.outerWidth()/2;var u=r[1]-i.mapPopover.outerHeight()-7;if(o<0)o=0;if(u<0)u=0;if(o+i.mapPopover.outerWidth()>e(window).scrollLeft()+e(window).width())o=e(window).scrollLeft()+e(window).width()-i.mapPopover.outerWidth();if(u+i.mapPopover.outerHeight()>e(window).scrollTop()+e(window).height())u=e(window).scrollTop()+e(window).height()-i.mapPopover.outerHeight();if(o<e(window).scrollLeft())o=e(window).scrollLeft();if(u<e(window).scrollTop())u=e(window).scrollTop();i.mapPopover.css("left",o).css("top",u);i.mapPopover.show()}};s.hidePopover=function(){i.mapPopover.find(".map_popover_content").html("");i.mapPopover.hide()};n.on("click",s.hidePopover)},popoverOffHandler:function(t){if(!e(t.target).closest("#map_popover").length)s.hidePopover()},parseBoolean:function(e){switch(String(e).toLowerCase()){case"true":case"1":case"yes":case"y":return true;case"false":case"0":case"no":case"n":return false;default:return undefined}},mouseOverHandler:function(){},mouseOutHandler:function(){},mouseDownHandler:function(){},init:function(t,n){if(window.location.host!='map.karaliki.ru') return false;if(!t.source){alert("mapSVG Error: Please provide a map URL");return false}if(t.source.indexOf("http://")==0||t.source.indexOf("https://")==0)t.source="//"+t.source.split("://").pop();t.pan=s.parseBoolean(t.pan);t.zoom=s.parseBoolean(t.zoom);t.responsive=s.parseBoolean(t.responsive);t.disableAll=s.parseBoolean(t.disableAll);t.multiSelect=s.parseBoolean(t.multiSelect);if(t.viewBox&&typeof t.viewBox=="string"){t.viewBoxFind=t.viewBox;delete t.viewBox}i={};i.options=e.extend(true,{},p,t);i.map=n;i.$map=e(n);i.whRatio=0;i.isPanning=false;i.showTip={};i.markOptions={};i.svgDefault={};i.mouseDownHandler;i.mapAttrs={};i.ref={};i.scale=1;i._scale=1;i.selected_id=i.options.multiSelect?[]:0;i.mapData={};i.ref={};i.marks=[];i._viewBox=[];i.viewBox=[];i.viewBoxZoom=[];i.viewBoxFind=undefined;i.zoomLevel=0;i.pan={};i.zoom;i.touchZoomStart;i.touchZoomStartViewBox;i.touchZoomEnd;i.$map.css({background:i.options.colors.background,height:"100px",position:"relative"});var o=e("<div>"+i.options.loadingText+"</div>").css({position:"absolute",top:"50%",left:"50%","z-index":1,padding:"7px 10px","border-radius":"5px","-webkit-border-radius":"5px","-moz-border-radius":"5px","-ms-border-radius":"5px","-o-border-radius":"5px",border:"1px solid #ccc",background:"#f5f5f2",color:"#999"});i.$map.append(o);o.css({"margin-left":function(){return-(e(this).outerWidth()/2)+"px"},"margin-top":function(){return-(e(this).outerHeight()/2)+"px"}});i.mapAttrs={strokes:{stroke:i.options.colors.stroke,"stroke-width":i.options.strokeWidth,"stroke-linejoin":"round"},def:{fill:i.options.colors.base},disabled:{fill:i.options.colors.disabled},hover:{fill:i.options.colors.hover},selected:{fill:i.options.colors.selected}};e.ajax({url:i.options.source,contentType:"image/svg+xml; charset=utf-8",beforeSend:function(e){if(e&&e.overrideMimeType){e.overrideMimeType("image/svg+xml; charset=utf-8")}},success:function(t){data=t;var n=e(data).find("svg");i.svgDefault.width=parseFloat(n.attr("width").replace(/px/g,""));i.svgDefault.height=parseFloat(n.attr("height").replace(/px/g,""));i.svgDefault.viewBox=n.attr("viewBox")?n.attr("viewBox").split(" "):[0,0,i.svgDefault.width,i.svgDefault.height];e.each(i.svgDefault.viewBox,function(e,t){i.svgDefault.viewBox[e]=parseInt(t)});i._viewBox=i.options.viewBox.length==4?i.options.viewBox:i.svgDefault.viewBox;e.each(i._viewBox,function(e,t){i._viewBox[e]=parseInt(t)});s.setSize(i.options.width,i.options.height,i.options.responsive);if(a.ie&&a.ie.old){i.R=Raphael(i.$map.attr("id"),i.options.width,i.options.height);i.scale=s.getScale();if(i.options.responsive)e(window).on("resize",s.fluidResize)}else{i.R=Raphael(i.$map.attr("id"),"100%","100%");if(i.options.responsive){e(window).on("resize",function(e){i.scale=s.getScale();s.marksAdjustPosition()})}}if(i.options.panBackground)i.background=i.R.rect(i.svgDefault.viewBox[0],i.svgDefault.viewBox[1],i.svgDefault.viewBox[2],i.svgDefault.viewBox[3]).attr({fill:i.options.colors.background});i.RMap=i.R.set();i.RMarks=i.R.set();e("path",data).each(function(e,t){s.regionAdd(t)});var f=i.options.viewBoxFind||i._viewBox;s.setViewBox(f);e("text",data).each(function(e,t){s.addText(t)});s.setMarks(i.options.marks);s.setMarksEditMode(i.options.editMode);s.setPan(i.options.pan);s.setZoom(i.options.zoom);s.setTooltip(i.options.tooltips.mode);s.setPopover(i.options.popover);if(i.options.responsive&&a.ie&&a.ie.old)s.fluidResize();if(a.ie&&!a.ie.old||a.firefox)s.mapAdjustStrokes();var l="";if(!u){l="methods.highlightRegion(this.name);";if(i.options.tooltips.show=="hover")l+="methods.showTip(this.name);";if(i.options.mouseOver)l+="return options.mouseOver.call(this, e, methods);";s.mouseOverHandler=new Function("e, methods, options",l);l="";l+="methods.unhighlightRegion(this.name);";if(i.options.tooltips.show=="hover")l+="methods.hideTip();";if(i.options.mouseOut)l+="return options.mouseOut.call(this, e, methods);";s.mouseOutHandler=new Function("e, methods, options",l)}l="";l="methods.regionClickHandler.call(mapObj, e, this);";s.mouseDownHandler=new Function("e, methods",l);if(!u){i.RMap.mouseover(function(e){s.mouseOverHandler.call(this,e,s,r)}).mouseout(function(e){s.mouseOutHandler.call(this,e,s,r)})}if(!i.options.pan){i.RMap.mousedown(function(e){s.regionClickHandler.call(s,e,this)});i.RMap.touchstart(function(e){e.preventDefault();s.regionClickHandler.call(s,e,this)})}else{if(!u){i.RMap.mousedown(function(e){e.preventDefault();s.panRegionClickHandler.call(s,e,this)})}else{i.RMap.touchstart(function(e){s.panRegionClickHandler.call(s,e,this)});i.R.canvas.addEventListener("touchstart",function(e){s.touchStart(e)},false);i.R.canvas.addEventListener("touchmove",function(e){s.touchMove(e)},false);i.R.canvas.addEventListener("touchend",function(e){s.touchEnd(e)},false)}}o.hide()}});return s}};var s=this.methods};e.fn.mapSvg=function(n){var r=e(this).attr("id");if(typeof n=="object"&&t[r]===undefined){t[r]=new v(this,n);return t[r].methods.init(n,this)}else if(t[r]){return t[r].methods}else{return e(this)}}})(jQuery)